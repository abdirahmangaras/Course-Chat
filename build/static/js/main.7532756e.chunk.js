(this.webpackJsonpcourse_chat=this.webpackJsonpcourse_chat||[]).push([[0],{147:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII="},148:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII="},166:function(e,t,a){e.exports=a(270)},171:function(e,t,a){},172:function(e,t,a){},228:function(e,t){},263:function(e,t,a){},264:function(e,t,a){},265:function(e,t,a){},266:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(11),l=a.n(r),o=(a(171),a(21)),c=a(15),i=a(28),u=a(27),m=(a(172),a(8)),d=a(12),p=a(312),g=a(307),h=a(310),f=a(273),E=a(311),b=a(272),v=Object(g.a)({focused:{backgroundColor:"gray"},paper:{marginTop:"4%",textAlign:"center",whiteSpace:"nowrap"},textcenter:{textAlign:"center"}});function O(e){var t=v();return s.a.createElement("div",{className:"App"},s.a.createElement(b.a,{className:t.paper},s.a.createElement(h.a,null,e.classes.map((function(a,n){return s.a.createElement(f.a,{onClick:function(){return e.setFocusedClass(a.courseName)},key:n,className:e.focusedClass==a.courseName?t.focused:"unfocused"},s.a.createElement(E.a,{primary:a.courseName,className:t.textcenter}))})))))}var C=a(326);function S(e){return s.a.createElement("div",{className:"App"},s.a.createElement("div",null,"feed for class ",e.focusedClass),s.a.createElement(C.a,{id:"outlined-multiline-static",multiline:!0,fullWidth:!0,placeholder:"Add a post for ".concat(e.focusedClass),rows:4,defaultValue:"",variant:"outlined"}))}var y=a(313),j=Object(g.a)({spaceFromLeft:{marginLeft:"5%"}});var N=Object(d.b)((function(e){return{userData:e.logged.user,classes:e.classes.currentClasses}}),null)((function(e){var t=j(),a=Object(n.useState)(""),r=Object(m.a)(a,2),l=r[0],o=r[1];return Object(n.useEffect)((function(){null==e.userData&&e.history.push("/login")})),s.a.createElement("div",{className:t.spaceFromLeft},s.a.createElement(p.a,{container:!0,spacing:3},s.a.createElement(p.a,{item:!0,xs:3},s.a.createElement(O,{focusedClass:l,classes:e.classes,setFocusedClass:o})),s.a.createElement(p.a,{item:!0,xs:6},s.a.createElement(S,{focusedClass:l}))),s.a.createElement(y.a,{orientation:"vertical"}))})),A=a(20),M=a(54),I=a(314),x=a(315),k=a(17),w=a.n(k),_=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"GET_ERRORS",payload:{msg:e,status:t,id:a}}},T=(a(193),a(96)),R=a.n(T),D=a(9),L=a(142);function U(e){e.sort((function(e,t){var a=e.username.toUpperCase(),n=t.username.toUpperCase();return a<n?-1:a>n?1:0})),console.log(e);for(var t=0,a=1;a<e.length;a++)e[a].username!=e[t].username&&(e[++t]=e[a]);for(;t+1<e.length;)e.splice(t+1);return console.log(e),e}var G=function(e,t,a,n){var s=JSON.stringify({username:a,password:n});w.a.post("http://localhost:5000/login",s,{headers:{"Content-Type":"application/json"}}).then((function(n){e({type:"LOGIN_SUCCESS",payload:n.data}),function(e,t){w.a.get("http://www.localhost:5000/".concat(t)).then(function(){var a=Object(L.a)(R.a.mark((function a(n){var s,r,l;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(e({type:"GET_CLASSES_FROM_DB",payload:n.data}),s=n.data,r=[],l=0;l<s.length;l++)r.push(w.a.get("http://www.localhost:5000/course/"+s[l]._id).then((function(e){return e.data})).catch((function(e){console.log(e)})));Promise.all(r).then((function(a){var n,s=(n=[]).concat.apply(n,Object(D.a)(a));s=(s=U(s)).filter((function(e){return e.username!=t})),e({type:"SET_STUDENTS",payload:s})}));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e,a),e({type:"SIGN_IN"}),W(e,t)})).catch((function(t){console.log(t.response),e({type:"LOGIN_FAIL"}),console.log(t)}))},W=function(e,t){var a=B();w.a.get("http://localhost:5000/get/user",a).then((function(a){console.log(a.data[0].username),e({type:"USER_LOADED",payload:a.data[0]}),t.push("/")})).catch((function(t){console.log(t),e({type:"AUTH_ERROR",payload:t})}))},B=function(){var e=localStorage.getItem("token"),t={headers:{"Content-type":"application/json"}};return e&&(t.headers["x-auth-token"]=e),t},F=a(19),P={loggedIn:!1,classes:[],token:localStorage.getItem("token"),isLoading:!1,user:null},Q=Object(g.a)((function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"center"},width:{width:"30%"},button:{background:"#35578f",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px #33435e",color:"white",marginTop:10,height:"50px",textDecoration:"none",display:"block",textAlign:"center","&:hover":{background:"#33435e"}},buttonText:{textDecoration:"none"},textfield:{marginTop:20},header:{marginTop:60}}}));var J=Object(d.b)((function(e){return console.log(e),{isLogged:e.logged.loggedIn,errorMsg:e.error.msg.msg,isLoading:e.logged.isLoading}}),(function(e){return{register:function(t,a,n,s,r,l){!function(e,t,a,n,s,r,l){var o=JSON.stringify({fullName:a,email:n,username:s,password:r,college:l});w.a.post("http://localhost:5000/signup",o,{headers:{"Content-Type":"application/json"}}).then((function(a){console.log(a.data);a.data.token;e({type:"REGISTER_SUCCESS",payload:a.data[0]}),e({type:"SIGN_IN"}),W(e,t)})).catch((function(t){e(_(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:"REGISTER_FAIL"}),console.log(t)}))}(e,t,a,n,s,r,l)}}}))((function(e){var t=Q(),a=Object(n.useState)(""),r=Object(m.a)(a,2),l=r[0],o=r[1],c=Object(n.useState)(""),i=Object(m.a)(c,2),u=i[0],p=i[1],g=Object(n.useState)(""),h=Object(m.a)(g,2),f=h[0],E=h[1],b=Object(n.useState)(""),v=Object(m.a)(b,2),O=v[0],S=v[1],y=Object(n.useState)(""),j=Object(m.a)(y,2),N=j[0],k=j[1],w=Object(n.useState)(""),_=Object(m.a)(w,2),T=_[0],R=_[1],D=Object(n.useState)(""),L=Object(m.a)(D,2),U=L[0],G=L[1],W=Object(n.useState)(""),B=Object(m.a)(W,2),F=B[0],P=B[1],J=Object(n.useState)(""),Y=Object(m.a)(J,2),K=Y[0],q=Y[1],V=Object(n.useState)(""),H=Object(m.a)(V,2),z=H[0],X=H[1],Z=Object(n.useState)(!1),$=Object(m.a)(Z,2),ee=($[0],$[1]),te=Object(n.useState)(!1),ae=Object(m.a)(te,2);function ne(){var e=new RegExp(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/);return console.log(e.test(f)),e.test(f)}return ae[0],ae[1],Object(d.c)(),s.a.createElement("div",{className:t.container},s.a.createElement(M.a,{className:t.header,variant:"h4"},"Make the most of your Academic life"),s.a.createElement("div",{className:t.width},s.a.createElement("p",null,e.errorMsg),s.a.createElement(C.a,{placeholder:"full name",name:"fullname",className:t.textfield,error:T.length>0,label:"Full Name*",id:"standard-error-helper-text",helperText:T,type:"text",variant:"outlined",fullWidth:!0,onChange:function(e){p(e.target.value)}}),s.a.createElement(C.a,{label:"email",name:"email",className:t.textfield,type:"email",placeholder:"E-mail",variant:"outlined",fullWidth:!0,onChange:function(e){E(e.target.value)}}),"email is empty"===F&&s.a.createElement("div",{id:"errorlabel"},F),"Invalid email format"===F&&s.a.createElement("div",{id:"errorlabel"},"Invalid Email Format!"),s.a.createElement(C.a,{className:t.textfield,placeholder:"Enter Username*",name:"username",type:"text",variant:"outlined",fullWidth:!0,onChange:function(e){o(e.target.value)}}),U.length>0&&s.a.createElement("div",{id:"errorlabel"},U),s.a.createElement(C.a,{className:t.textfield,placeholder:"Enter Password*",name:"password",type:"password",variant:"outlined",fullWidth:!0,onChange:function(e){S(e.target.value)}}),K.length>0&&s.a.createElement("div",{id:"errorlabel"},K),s.a.createElement(C.a,{id:"standard-select-currency",select:!0,label:"Select",name:"college",onChange:function(e){k(e.target.value)},fullWidth:!0,helperText:"Please select your College"},s.a.createElement(I.a,{value:"Queens College"},"Queens"),s.a.createElement(I.a,{value:"Hunter College"},"Hunter"),s.a.createElement(I.a,{value:"Baruch"},"Baruch")),z.length>0&&s.a.createElement("div",{id:"errorlabel"},z),s.a.createElement(A.c,{to:{pathname:"/"},style:{textDecoration:"none"},onClick:function(t){!function(){ee(!0),0===u.length?R("fullname is blank"):0===f.length?(R(""),P("email is empty")):ne()?0===l.length?(R(""),P(""),G("Username is empty")):0===O.length?(R(""),P(""),G(""),q("password is empty")):(R(""),P(""),G(""),q(""),X("College must be chosen")):(R(""),P("Invalid email format"));return l.length>0&&u.length>0&&f.length>0&&O.length>0&&N.length>0&&ne()}()?t.preventDefault():(t.preventDefault(),console.log(e.errorMsg),e.register(e.history,u,f,l,O,N))}},s.a.createElement(x.a,{fullWidth:!0,className:t.button},"Signup"))))})),Y=Object(g.a)((function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"center"},width:{width:"30%"},button:{background:"#35578f",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px #33435e",color:"white",marginTop:30,height:"50px",textDecoration:"none",display:"block",textAlign:"center","&:hover":{background:"#33435e"}},textfield:{marginTop:20},header:{marginTop:60}}}));var K=Object(d.b)((function(e){return console.log(e),{isLoading:e.logged.isLoading,isLogged:e.logged.loggedIn,errorMsg:e.error.msg.message}}),(function(e){return{login:function(t,a,n){G(e,t,a,n)}}}))((function(e){var t=Y(),a=Object(n.useState)(""),r=Object(m.a)(a,2),l=r[0],o=r[1],c=Object(n.useState)(""),i=Object(m.a)(c,2),u=i[0],p=i[1],g=Object(n.useState)(!1),h=Object(m.a)(g,2),f=(h[0],h[1]),E=Object(n.useState)(!1),b=Object(m.a)(E,2),v=(b[0],b[1],Object(n.useState)("")),O=Object(m.a)(v,2),S=O[0],y=O[1],j=Object(n.useState)(""),N=Object(m.a)(j,2),I=N[0],k=N[1];function w(t){!function(){f(!0);var e=function(){for(var e=0,t=0,a=0;a<u.length;a++){var n=u.charAt(a);n==n.toUpperCase()&&e++,new RegExp(/^[\d]$/).test(n)&&t++}return t>0&&t<u.length&&e>0&&e<u.length}();0===l.length?y("Username is empty"):0===u.length?(y(""),k("password is empty")):u.length<7?(y(""),k("password needs to be more then eight characters")):e||(y(""),k("password needs at least one digit and one uppercase"));return u.length>=7&&e}()?t.preventDefault():(t.preventDefault(),e.login(e.history,l,u),console.log(e.errorMsg))}return Object(d.c)(),s.a.createElement("div",{className:t.container},s.a.createElement(M.a,{className:t.header,variant:"h4"},"Welcome back!"),s.a.createElement("div",{className:t.width},s.a.createElement("p",null,e.errorMsg),s.a.createElement("div",{className:"spaceForInput"},s.a.createElement(C.a,{placeholder:"Enter Username*",name:"username",type:"text",variant:"outlined",fullWidth:!0,className:t.textfield,onChange:function(e){o(e.target.value)}}),S.length>0&&s.a.createElement("div",{id:"errorlabel"},S)),s.a.createElement("div",{className:"spaceForInput"},s.a.createElement(C.a,{placeholder:"Enter Password*",name:"password",type:"password",variant:"outlined",fullWidth:!0,onChange:function(e){p(e.target.value)},className:t.textfield,onKeyPress:function(e){return"Enter"===e.key?w(e):null}}),I.length>0&&s.a.createElement("div",{id:"errorlabel"},I)),s.a.createElement(A.c,{to:{pathname:"/"},style:{textDecoration:"none"},onClick:w},s.a.createElement(x.a,{fullWidth:!0,className:t.button},"Login"))))})),q=a(30),V=a(6),H=a(322),z=a(323),X=a(317),Z=a(93),$=a.n(Z),ee=a(316),te=a(91),ae=a.n(te),ne=a(92),se=a.n(ne),re=a(90),le=a.n(re),oe=a(329),ce=a(321),ie=a(319),ue=a(320),me=a(318),de=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).openModal=function(){n.setState({isModalOpened:!0}),console.log(n.state.isModalOpened)},n.closeModal=function(){n.setState({isModalOpened:!1}),console.log(n.state.isModalOpened)},n.updateProfessorname=function(e){n.setState({profName:e.target.value})},n.updateClass=function(e){n.setState({class:e.target.value})},n.updateTime=function(e){n.setState({time:e.target.value})},n.addClass=function(){var e={courseName:n.state.class,profName:n.state.profName,time:n.state.time,username:n.props.userData.username};n.state.classes.push(e),n.setState({classes:n.state.classes}),w.a.post("http://localhost:5000/",{courseName:n.state.class,profName:n.state.profName,time:n.state.time,username:n.props.userData.username,nameOfUser:n.props.userData.fullName}).then().catch((function(e){console.log(e)})),n.setState({isModalOpened:!1})},n.listItemClicked=function(e){console.log(e)},n.delete=function(e){console.log(e),w.a.delete("http://localhost:5000/".concat(e)).then().catch((function(e){return console.log(e)}))},n.state={isModalOpened:!1,profName:"",class:"",time:"",classes:n.props.classes},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App",id:"parentDiv"},s.a.createElement("div",{id:"nameandcollegeandimage"},s.a.createElement("div",{id:"displayflexrow"},s.a.createElement("div",{id:"profileimage"},s.a.createElement("img",null)),s.a.createElement("div",{id:"nameandcollege"},s.a.createElement("div",{id:"fullname"},s.a.createElement("p",null,this.props.userData.fullName)),s.a.createElement("div",{id:"college"},s.a.createElement("p",null,"Student @ ",this.props.userData.college)))),s.a.createElement("p",null,"The username is ",this.props.userData.username),s.a.createElement("p",null,"Your current email set is:",this.props.userData.email)),s.a.createElement("div",{id:"listItems"},s.a.createElement(h.a,{id:"list"},s.a.createElement(f.a,{className:"listItem",id:"topRowOfList"},s.a.createElement(E.a,{primary:"Class Name"}),s.a.createElement(E.a,{primary:"Professor Name"}),s.a.createElement(E.a,{primary:"Time Taken"}),s.a.createElement(ee.a,null,s.a.createElement(X.a,{onClick:this.openModal},s.a.createElement(le.a,null)),s.a.createElement(oe.a,{open:this.state.isModalOpened,onClose:this.closeModal,"aria-labelledby":"form-dialog-title"},s.a.createElement(me.a,{id:"form-dialog-title"},"Enter a Class"),s.a.createElement(ie.a,null,s.a.createElement(ue.a,null,"Enter the class name, professor name, and time below:"),s.a.createElement(C.a,{autoFocus:!0,margin:"dense",id:"classname",label:"Class name:",type:"text",fullWidth:!0,onChange:this.updateClass}),s.a.createElement(C.a,{autoFocus:!0,margin:"dense",id:"professor name",label:"Professor name:",type:"text",fullWidth:!0,onChange:this.updateProfessorname}),s.a.createElement(C.a,{autoFocus:!0,margin:"dense",id:"time",label:"Time",type:"time",fullWidth:!0,onChange:this.updateTime})),s.a.createElement(ce.a,null,s.a.createElement(x.a,{onClick:this.closeModal,color:"primary"},"Cancel"),s.a.createElement(x.a,{onClick:this.addClass,color:"primary"},"Add Class"))))),this.state.classes.map((function(t,a){return s.a.createElement(f.a,{button:!0,id:"listItem",component:A.b,to:{pathname:"/class",state:{classId:t._id,className:t.courseName,profName:t.profName,time:t.time,username:e.props.userData.username}},onClick:function(){e.props.getStudentsForClass(t,t._id)},key:a,className:"listItem"},s.a.createElement(E.a,{primary:t.courseName}),s.a.createElement(E.a,{primary:t.profName}),s.a.createElement(E.a,{primary:t.time}),s.a.createElement(ee.a,null,s.a.createElement(X.a,{onClick:function(){e.delete(t._id)}},s.a.createElement(ae.a,null)),s.a.createElement(X.a,null,s.a.createElement(se.a,null))))})))))}}]),a}(s.a.Component);var pe=Object(d.b)((function(e){return{userData:e.logged.user,classes:e.classes.currentClasses}}),(function(e){return{getStudentsForClass:function(t,a){console.log(t),function(e,t,a){w.a.get("http://www.localhost:5000/course/"+a).then((function(a){console.log(a.data),e({type:"GET_QUERIED_CLASSES_FROM_DB",payload:a.data}),e({type:"SET_CLASS",payload:t})})).catch((function(e){console.log(e)}))}(e,t,a)}}}))(de),ge=a(3),he=Object(g.a)((function(e){var t;return{root:{color:"#2daebd"},menuButton:(t={marginRight:e.spacing(2)},Object(V.a)(t,e.breakpoints.up("xs"),{display:"none"}),Object(V.a)(t,e.breakpoints.down("xs"),{display:"block"}),t),title:{flexGrow:1,color:"#2daebd",fontWeight:"bolder",textDecoration:"none",fontSize:30,marginLeft:e.spacing(5)},link:{marginLeft:30,textDecoration:"none",fontSize:20,color:"#2daebd",fontWeight:"bolder"},login:{borderLeftWidth:2},navBar:{backgroundColor:"white",boxShadow:"none"},toolbar:e.mixins.toolbar,bigScreen:Object(V.a)({},e.breakpoints.down("xs"),{display:"none"}),underline:{textDecoration:"underline",textDecorationColor:"#35578f"},menuItems:{marginRight:e.spacing(9)}}}));var fe=Object(d.b)((function(e){return console.log(e),{isLogged:e.logged.loggedIn}}),(function(e){return{signOut:function(){!function(e){e({type:"SIGN_OUT"}),e({type:"LOGOUT_SUCCESS"})}(e)}}}))(Object(q.withRouter)((function(e){var t,a,r,l,o,c=he(),i=Object(n.useState)("login"),u=Object(m.a)(i,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){var t=e.history.location.pathname;t=t.substring(1),p(t)}),[]),s.a.createElement("div",{className:c.root},s.a.createElement(H.a,{className:c.navBar,position:"static"},s.a.createElement(z.a,null,s.a.createElement(M.a,{variant:"h6",className:c.title},"Course-Chat"),s.a.createElement("div",{className:c.menuItems},!1===e.isLogged&&s.a.createElement(A.b,{onClick:function(){return p("signup")},className:Object(ge.a)((t={},Object(V.a)(t,c.link,!0),Object(V.a)(t,c.underline,"signup"===d),t)),to:"/signup"},"Sign-Up"),!1===e.isLogged&&s.a.createElement(A.b,{onClick:function(){return p("login")},className:Object(ge.a)((a={},Object(V.a)(a,c.link,!0),Object(V.a)(a,c.underline,"login"===d),a)),to:"/login"},"Login"),e.isLogged&&s.a.createElement(A.b,{onClick:function(){return p("profile")},className:Object(ge.a)((r={},Object(V.a)(r,c.link,!0),Object(V.a)(r,c.underline,"profile"===d),r)),to:"/profile"},"Profile"),e.isLogged&&s.a.createElement(A.b,{onClick:function(){return p("chat")},className:Object(ge.a)((l={},Object(V.a)(l,c.link,!0),Object(V.a)(l,c.underline,"chat"===d),l)),to:"/chat"},"Messages"),e.isLogged&&s.a.createElement(A.b,Object(V.a)({onClick:function(){return p("login")},className:Object(ge.a)((o={},Object(V.a)(o,c.link,!0),Object(V.a)(o,c.underline,"login"===d),o)),to:"/login"},"onClick",(function(){e.history.push("/login"),e.signOut()})),"LogOut")),s.a.createElement(X.a,{edge:"start",className:c.menuButton,color:"primary",size:"medium","aria-label":"menu"},s.a.createElement($.a,{color:"blue"})))))}))),Ee=a(94),be=a(144),ve=a.n(be),Oe=a(75),Ce=a.n(Oe),Se=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={students:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.classInfo),console.log(this.props.classInfo.username)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},this.props.classInfo.courseName,s.a.createElement("p",null,this.props.classInfo.profName),s.a.createElement("p",null,this.props.classInfo.time),s.a.createElement("p",null,"class component"),s.a.createElement("p",null,"Students taking this class!"),s.a.createElement(h.a,null,this.props.queriedClasses.map((function(t,a){return s.a.createElement("div",null,t.username!=e.props.classInfo.username&&s.a.createElement(f.a,null,s.a.createElement(E.a,{primary:t.username}),s.a.createElement(ee.a,null,s.a.createElement(Ee.Link,{to:{pathname:"/chat",state:{username:e.props.classInfo.username,sendMessageTo:t.username}}},s.a.createElement(X.a,null,s.a.createElement(ve.a,null))),s.a.createElement(X.a,null,s.a.createElement(Ce.a,null)))))}))))}}]),a}(s.a.Component);var ye=Object(d.b)((function(e){return console.log(e),{queriedClasses:e.classes.queriedClasses,classInfo:e.classes.classInfo}}),(function(e){return{}}))(Se),je=(a(199),a(145)),Ne=a.n(je),Ae=a(146),Me=a.n(Ae),Ie=(a(263),a(99)),xe=a.n(Ie),ke=function(e){var t=e.message,a=(e.currentChatter,e.username),n=t.text||t.message,r=!0;return null!=t.from&&t.from!=a&&(r=!1,t.from.trim().toLowerCase()),r?s.a.createElement("div",{className:"messageContainer justifyEnd"},s.a.createElement("div",{className:"messageBox backgroundBlue"},s.a.createElement("p",{className:"messageText colorWhite"},xe.a.emojify(n)))):s.a.createElement("div",{className:"messageContainer justifyStart"},s.a.createElement("div",{className:"messageBox backgroundLight"},s.a.createElement("p",{className:"messageText colorDark"},xe.a.emojify(n))))},we=(a(264),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(Me.a,{className:"messages"},this.props.messages.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement(ke,{message:t,currentChatter:e.props.currentChatter,username:e.props.currentUser}))})))}}]),a}(s.a.Component)),_e=a(147),Te=a.n(_e),Re=a(148),De=a.n(Re),Le=a(149),Ue=a.n(Le),Ge=(a(265),function(e){var t=e.room,a=e.openModal;return s.a.createElement("div",{className:"infoBar"},s.a.createElement("div",{className:"leftInnerContainer"},s.a.createElement("img",{className:"onlineIcon",src:Te.a,alt:"online icon"}),s.a.createElement("h3",null,t)),s.a.createElement("div",{className:"rightInnerContainer"},s.a.createElement(x.a,{onClick:function(){return a()}},s.a.createElement(Ue.a,null)),s.a.createElement("a",{href:"/"},s.a.createElement("img",{src:De.a,alt:"close icon"}))))}),We=(a(266),function(e){var t=e.setMessage,a=e.sendMessage,n=e.message,r=e.currentChatter;return s.a.createElement("form",{className:"form"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Type a message...",value:n,onChange:function(e){var a=e.target.value;return t(a)},onKeyPress:function(e){return"Enter"===e.key?a(e):null}}),s.a.createElement("button",{disabled:""==r,className:""!==r?"sendButton":"redSendButton",onClick:function(e){return a(e)}},"Send"))}),Be=a(325),Fe=a(331),Pe=(a(267),a(76)),Qe=a(324),Je=a(330),Ye=a(327),Ke=Object(g.a)((function(e){return{root:{padding:"10px 0px 10px 0px",display:"flex",alignItems:"center",width:"100%",borderTopColor:"gray"},input:{marginLeft:e.spacing(4),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}));function qe(e){var t=Ke(),a=e.handleChangeSearchText;return s.a.createElement(Ye.a,{className:t.root,borderColor:"grey.500",borderTop:1,borderBottom:1},s.a.createElement(M.a,{variant:"h6"},"To:"),s.a.createElement(Je.a,{className:t.input,placeholder:"Search classmates",onChange:function(e){return a(e.target.value)},fullWidth:!0}))}var Ve=a(150),He=a.n(Ve),ze=Object(g.a)({avatar:{backgroundColor:Pe.a[100],color:Pe.a[600]},grow:{justifyContent:"flex-end",flex:1},listItem:{color:Pe.a[700],borderBottom:0},nameUnderUsername:{flexGrow:1,flexShrink:1,flexBasis:"auto",width:"100%"},username:{fontWeight:"bold",color:Qe.a[900]},name:{color:"gray"},courseName:{color:Pe.a[800]},titleAndCloseIcon:{display:"flex"}});function Xe(e){var t=ze(),a=e.addChatter,r=e.closeModal,l=e.modalOpened,o=e.classMates,c=Object(n.useState)(o),i=Object(m.a)(c,2),u=i[0],d=i[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(oe.a,{id:"dialog",open:l,onClose:r,fullWidth:!0},s.a.createElement("div",{className:t.titleAndCloseIcon},s.a.createElement(me.a,{className:t.grow,id:"simple-dialog-title"},"New Message"),s.a.createElement(x.a,{onClick:function(){return r()}},s.a.createElement(He.a,null))),s.a.createElement(qe,{handleChangeSearchText:function(e){var t=o.filter((function(t){return-1!=t.username.toLowerCase().indexOf(e.toLowerCase())}));d(t)}}),s.a.createElement(h.a,null,u.map((function(e,n){return s.a.createElement(f.a,Object(V.a)({className:t.listItem,button:!0,id:"listItem",onClick:function(){return function(e){a(e.username),r()}(e)},key:n},"className","listItem"),s.a.createElement(Be.a,null,s.a.createElement(Fe.a,{className:t.avatar},s.a.createElement(Ce.a,null))),s.a.createElement("div",{className:t.nameUnderUsername},s.a.createElement(E.a,{className:t.username,primary:e.username}),s.a.createElement(E.a,{className:t.name,primary:e.nameOfUser})),s.a.createElement(E.a,{primary:e.courseName,className:t.courseName}))})))))}a(268),a(269);var Ze=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.chatters,n=t.currentChatter;return s.a.createElement("div",{className:"chattersList"},a.map((function(t){return s.a.createElement(f.a,{id:n==t?"currentChatter":"chatter",button:!0,onClick:function(){return e.props.changeChatter(t)}},s.a.createElement("p",null,t))})))}}]),a}(s.a.Component),$e={chatters:[],messages:[],socketId:""},et=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).filterMessages=function(e,t){for(var a=[],s=0,r=0;r<e.length;r++)e[r].from!=t&&e[r].to!==t||(a[s++]=e[r]);console.log(a),n.setState({messagesToShow:a})},n.sendMessage=function(e){e.preventDefault(),""!=n.state.message&&n.state.socket.emit("sendPrivateMessage",n.state.message,n.state.username,n.state.currentChatter,(function(){return n.setMessage("")}));var t={message:n.state.message,from:n.state.username,to:n.state.currentChatter};n.props.addMessage(t),n.setState({allMessages:[].concat(Object(D.a)(n.state.allMessages),[t])}),n.filterMessages(n.state.allMessages,n.state.currentChatter),n.setMessage("")},n.setMessage=function(e){n.setState({message:e})},n.addChatter=function(e){var t=n.state.chatters.indexOf(e);console.log(t),-1==t&&n.setState({chatters:[].concat(Object(D.a)(n.state.chatters),[e])}),n.changeChatter(e)},n.changeChatter=function(e){n.setState({currentChatter:e}),n.filterMessages(n.state.allMessages,e)},n.openModal=function(){n.setState({modalOpened:!0})},n.closeModal=function(){n.setState({modalOpened:!1})},n.state={username:n.props.user.username,currentChatter:"",chatters:[],allMessages:[],messagesToShow:[],socket:Ne()("http://localhost:4000/"),message:"",modalOpened:!1},n}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;console.log("mounted again");var t={};if(0!==this.props.allMessages.length?(this.setState({allMessages:this.props.allMessages}),this.setState({chatters:this.props.allChatters})):(w.a.get("http://localhost:5000/messages/".concat(this.state.username,"/chatters")).then((function(a){console.log(a.data);var n=a.data.filter((function(t){return t!=e.state.username}));t.chatters=n,e.setState({chatters:n})})),w.a.get("http://localhost:5000/messages/".concat(this.state.username)).then((function(a){t.messages=a.data,e.setState({allMessages:t.messages}),e.props.setMessagesAndChatters(t)})).then((function(){if(console.log("yay"),null!=e.props.location.state){console.log("only when u come from class component");var t=e.props.location.state.sendMessageTo;e.setState({currentChatter:t}),e.props.allChatters.includes(t)||e.setState({chatters:[].concat(Object(D.a)(e.state.chatters),[t])}),e.filterMessages(e.props.allMessages,t)}}))),null!=this.props.location.state){console.log("only when u come from class component");var a=this.props.location.state.sendMessageTo;this.setState({currentChatter:a}),this.props.allChatters.includes(a)||this.setState({chatters:[].concat(Object(D.a)(this.state.chatters),[a])}),this.filterMessages(this.props.allMessages,a)}this.setState({chatters:this.props.allChatters}),this.filterMessages(this.props.allMessages,this.state.currentChatter),this.state.socket.emit("user_connected",this.state.username),this.state.socket.on("private_message",(function(t,a){t={from:a,to:e.state.username,message:t};e.props.addMessage(t),console.log(t),e.setState({allMessages:[].concat(Object(D.a)(e.state.allMessages),[t])}),e.filterMessages(e.state.allMessages,e.state.currentChatter)}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"outerContainer"},s.a.createElement(Ze,{username:this.state.username,chatters:this.state.chatters,changeChatter:this.changeChatter,currentChatter:this.state.currentChatter}),s.a.createElement("div",{className:"container"},s.a.createElement(Ge,{openModal:this.openModal,room:this.state.currentChatter}),s.a.createElement(we,{messages:this.state.messagesToShow,currentChatter:this.state.currentChatter,currentUser:this.state.username}),s.a.createElement(We,{message:this.state.message,setMessage:this.setMessage,sendMessage:this.sendMessage,currentChatter:this.state.currentChatter}),this.state.modalOpened&&s.a.createElement(Xe,{addChatter:this.addChatter,changeChatter:this.changeChatter,modalOpened:this.state.modalOpened,classMates:this.props.classMates,closeModal:this.closeModal})))}}]),a}(s.a.Component);et.defaultProps={connectedClients:[],classMates:[],username:{username:"akhil"}};var tt=Object(d.b)((function(e){return{allMessages:e.chatters.messages,allChatters:e.chatters.chatters,classMates:e.classes.classMates,user:e.logged.user}}),(function(e){return{setMessagesAndChatters:function(t){e({type:"set_messages_and_chatters_from_db",payload:t})},addMessage:function(t){e({type:"ADD_MESSAGE",payload:t})},addChatter:function(t){e({type:"ADD_CHATTER",payload:t})}}}))(et),at=a(46),nt=a(151),st={msg:{},status:null,id:null},rt={currentClasses:[],queriedClasses:[],classInfo:{},classMates:[]},lt=[nt.a],ot=Object(at.c)({logged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return{loggedIn:!0};case"SIGN_OUT":return{loggedIn:!1};case"ADD_CLASS":return{classes:[].concat(Object(D.a)(e.classes),[t.payload])};case"USER_LOADING":return Object(F.a)({},e,{isLoading:!0});case"USER_LOADED":return Object(F.a)({},e,{loggedIn:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(F.a)({},e,{},t.payload,{loggedIn:!0,isLoading:!1,user:t.payload});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(F.a)({},e,{token:null,user:null,loggedIn:!1,isLoading:!1});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return console.log(t.payload),Object(F.a)({},e,{msg:t.payload.msg,status:t.payload.status,id:t.payload.id});case"CLEAR_ERRORS":return Object(F.a)({},e,{msg:{},status:null,id:null});default:return e}},chatters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_messages_and_chatters_from_db":return{chatters:t.payload.chatters,messages:t.payload.messages};case"ADD_MESSAGE":return Object(F.a)({},e,{messages:[].concat(Object(D.a)(e.messages),[t.payload])});case"ADD_CHATTER":return Object(F.a)({},e,{chatters:[].concat(Object(D.a)(e.chatters),[t.payload])});default:return e}},classes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CLASS":return Object(F.a)({},e,{currentClasses:[].concat(Object(D.a)(e.currentClasses),[t.payload])});case"SET_STUDENTS":return console.log(t.payload),Object(F.a)({},e,{classMates:t.payload});case"GET_CLASSES_FROM_DB":return Object(F.a)({},e,{currentClasses:t.payload});case"GET_QUERIED_CLASSES_FROM_DB":return Object(F.a)({},e,{queriedClasses:t.payload});case"SET_CLASS":return Object(F.a)({},e,{classInfo:t.payload});default:return e}}});var ct=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return void console.log(t)}}(),it=Object(at.d)((function(e,t){return"SIGN_OUT"===t.type&&(e=void 0),ot(e,t)}),ct,at.a.apply(void 0,lt));it.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){console.log(a)}}(it.getState())}));var ut=it,mt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.loadUser()}},{key:"render",value:function(){return s.a.createElement(A.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(fe,null),s.a.createElement(q.Route,{path:"/",exact:!0,component:N}),s.a.createElement(q.Route,{path:"/signup",component:J}),s.a.createElement(q.Route,{path:"/login",component:K}),s.a.createElement(q.Route,{path:"/profile",component:pe}),s.a.createElement(q.Route,{path:"/class",component:ye}),s.a.createElement(q.Route,{path:"/chat",component:tt})))}}]),a}(s.a.Component);var dt=Object(d.b)(null,(function(e){return{loadUser:function(){W(e)}}}))(mt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(d.a,{store:ut},s.a.createElement(dt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[166,1,2]]]);
//# sourceMappingURL=main.7532756e.chunk.js.map