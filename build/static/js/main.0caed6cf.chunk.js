(this.webpackJsonpcourse_chat=this.webpackJsonpcourse_chat||[]).push([[0],{145:function(e,t,a){e.exports=a.p+"static/media/suite.ccd7235f.png"},146:function(e,t,a){e.exports=a.p+"static/media/blm.9f5f0d56.jpeg"},148:function(e,t){},151:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII="},168:function(e,t,a){e.exports=a(273)},173:function(e,t,a){},174:function(e,t,a){},230:function(e,t){},265:function(e,t,a){},266:function(e,t,a){},267:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII="},268:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(11),l=a.n(r),o=(a(173),a(25)),c=a(19),i=a(29),u=a(28),m=(a(174),a(9)),d=a(14),g=a(315),p=a(310),h=a(313),f=a(276),E=a(314),b=a(275),v=Object(p.a)({focused:{backgroundColor:"gray"},paper:{marginTop:"4%",textAlign:"center",whiteSpace:"nowrap"},textcenter:{textAlign:"center"}});function O(e){var t=v();return n.a.createElement("div",{className:"App"},n.a.createElement(b.a,{className:t.paper},n.a.createElement(h.a,null,e.classes.map((function(a,s){return n.a.createElement(f.a,{onClick:function(){return e.setFocusedClass(a.courseName)},key:s,className:e.focusedClass==a.courseName?t.focused:"unfocused"},n.a.createElement(E.a,{primary:a.courseName,className:t.textcenter}))})))))}var C=a(329);function S(e){return n.a.createElement("div",{className:"App"},n.a.createElement("div",null,"feed for class ",e.focusedClass),n.a.createElement(C.a,{id:"outlined-multiline-static",multiline:!0,fullWidth:!0,placeholder:"Add a post for ".concat(e.focusedClass),rows:4,defaultValue:"",variant:"outlined"}))}var y=a(316),j=Object(p.a)({spaceFromLeft:{marginLeft:"5%"}});var N=Object(d.b)((function(e){return{userData:e.logged.user,classes:e.classes.currentClasses}}),null)((function(e){var t=j(),a=Object(s.useState)(""),r=Object(m.a)(a,2),l=r[0],o=r[1];return Object(s.useEffect)((function(){null==e.userData&&e.history.push("/login")})),n.a.createElement("div",{className:t.spaceFromLeft},n.a.createElement(g.a,{container:!0,spacing:3},n.a.createElement(g.a,{item:!0,xs:3},n.a.createElement(O,{focusedClass:l,classes:e.classes,setFocusedClass:o})),n.a.createElement(g.a,{item:!0,xs:6},n.a.createElement(S,{focusedClass:l}))),n.a.createElement(y.a,{orientation:"vertical"}))})),A=a(16),M=a(54),x=a(317),I=a(318),k=a(20),w=a.n(k),T=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"GET_ERRORS",payload:{msg:e,status:t,id:a}}},L=(a(195),a(96)),_=a.n(L),R=a(8),D=a(143),U="https://coursechat2.herokuapp.com/";function G(e){e.sort((function(e,t){var a=e.username.toUpperCase(),s=t.username.toUpperCase();return a<s?-1:a>s?1:0})),console.log(e);for(var t=0,a=1;a<e.length;a++)e[a].username!=e[t].username&&(e[++t]=e[a]);for(;t+1<e.length;)e.splice(t+1);return console.log(e),e}var F=function(e,t,a,s){var n=JSON.stringify({username:a,password:s});w.a.post("".concat(U,"users/login"),n,{headers:{"Content-Type":"application/json"}}).then((function(s){e({type:"LOGIN_SUCCESS",payload:s.data}),function(e,t){var a=W();console.log(a),console.log(U),w.a.get("".concat(U,"classes/").concat(t),a).then(function(){var s=Object(D.a)(_.a.mark((function s(n){var r,l,o;return _.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:for(console.log(n),e({type:"GET_CLASSES_FROM_DB",payload:n.data}),r=n.data,l=[],o=0;o<r.length;o++)l.push(w.a.get("".concat(U,"classes/course/")+r[o]._id,a).then((function(e){return console.log(e),e.data})).catch((function(e){console.log(e)})));Promise.all(l).then((function(a){var s,n=(s=[]).concat.apply(s,Object(R.a)(a));n=(n=G(n)).filter((function(e){return e.username!=t})),e({type:"SET_STUDENTS",payload:n})}));case 6:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}(e,a),e({type:"SIGN_IN"}),B(e,t)})).catch((function(t){console.log(t.response),e(T(t.response.data.message,t.response.status,"LOGIN_FAIL")),e({type:"LOGIN_FAIL"})}))},B=function(e,t){var a=W();w.a.get("".concat(U,"users/get/user"),a).then((function(a){console.log(a.data),e({type:"USER_LOADED",payload:a.data}),t.push("/")})).catch((function(t){console.log(t),e({type:"AUTH_ERROR",payload:t})}))},W=function(){var e=localStorage.getItem("token");console.log(e);var t={headers:{"Content-type":"application/json"}};return e&&(console.log(e),t.headers["x-auth-token"]=e),t},P=a(18),Q={loggedIn:!1,classes:[],token:localStorage.getItem("token"),isLoading:!1,user:null},J=Object(p.a)((function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"center"},width:{width:"30%"},button:{background:"#35578f",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px #33435e",color:"white",marginTop:10,height:"50px",textDecoration:"none",display:"block",textAlign:"center","&:hover":{background:"#33435e"}},buttonText:{textDecoration:"none"},textfield:{marginTop:20},header:{marginTop:60}}}));var Y=Object(d.b)((function(e){return console.log(e),{isLogged:e.logged.loggedIn,errorMsg:e.error.msg.msg,isLoading:e.logged.isLoading}}),(function(e){return{register:function(t,a,s,n,r,l){!function(e,t,a,s,n,r,l){var o=JSON.stringify({fullName:a,email:s,username:n,password:r,college:l});w.a.post("".concat(U,"users/signup"),o,{headers:{"Content-Type":"application/json"}}).then((function(a){console.log(a.data);a.data.token;e({type:"REGISTER_SUCCESS",payload:a.data[0]}),e({type:"SIGN_IN"}),B(e,t)})).catch((function(t){e(T(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:"REGISTER_FAIL"}),console.log(t.response.data.message)}))}(e,t,a,s,n,r,l)}}}))((function(e){var t=J(),a=Object(s.useState)(""),r=Object(m.a)(a,2),l=r[0],o=r[1],c=Object(s.useState)(""),i=Object(m.a)(c,2),u=i[0],g=i[1],p=Object(s.useState)(""),h=Object(m.a)(p,2),f=h[0],E=h[1],b=Object(s.useState)(""),v=Object(m.a)(b,2),O=v[0],S=v[1],y=Object(s.useState)(""),j=Object(m.a)(y,2),N=j[0],k=j[1],w=Object(s.useState)(""),T=Object(m.a)(w,2),L=T[0],_=T[1],R=Object(s.useState)(""),D=Object(m.a)(R,2),U=D[0],G=D[1],F=Object(s.useState)(""),B=Object(m.a)(F,2),W=B[0],P=B[1],Q=Object(s.useState)(""),Y=Object(m.a)(Q,2),q=Y[0],K=Y[1],H=Object(s.useState)(""),V=Object(m.a)(H,2),z=V[0],Z=V[1],X=Object(s.useState)(!1),$=Object(m.a)(X,2),ee=($[0],$[1]),te=Object(s.useState)(!1),ae=Object(m.a)(te,2);function se(){var e=new RegExp(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/);return console.log(e.test(f)),e.test(f)}return ae[0],ae[1],Object(d.c)(),n.a.createElement("div",{className:t.container},n.a.createElement(M.a,{className:t.header,variant:"h4"},"Make the most of your Academic life"),n.a.createElement("div",{className:t.width},n.a.createElement("p",null,e.errorMsg),n.a.createElement(C.a,{placeholder:"full name",name:"fullname",className:t.textfield,error:L.length>0,label:"Full Name*",id:"standard-error-helper-text",helperText:L,type:"text",variant:"outlined",fullWidth:!0,onChange:function(e){g(e.target.value)}}),n.a.createElement(C.a,{label:"email",name:"email",className:t.textfield,type:"email",placeholder:"E-mail",variant:"outlined",fullWidth:!0,onChange:function(e){E(e.target.value)}}),"email is empty"===W&&n.a.createElement("div",{id:"errorlabel"},W),"Invalid email format"===W&&n.a.createElement("div",{id:"errorlabel"},"Invalid Email Format!"),n.a.createElement(C.a,{className:t.textfield,placeholder:"Enter Username*",name:"username",type:"text",variant:"outlined",fullWidth:!0,onChange:function(e){o(e.target.value)}}),U.length>0&&n.a.createElement("div",{id:"errorlabel"},U),n.a.createElement(C.a,{className:t.textfield,placeholder:"Enter Password*",name:"password",type:"password",variant:"outlined",fullWidth:!0,onChange:function(e){S(e.target.value)}}),q.length>0&&n.a.createElement("div",{id:"errorlabel"},q),n.a.createElement(C.a,{id:"standard-select-currency",select:!0,label:"Select",name:"college",onChange:function(e){k(e.target.value)},fullWidth:!0,helperText:"Please select your College"},n.a.createElement(x.a,{value:"Queens College"},"Queens"),n.a.createElement(x.a,{value:"Hunter College"},"Hunter"),n.a.createElement(x.a,{value:"Baruch"},"Baruch")),z.length>0&&n.a.createElement("div",{id:"errorlabel"},z),n.a.createElement(A.c,{to:{pathname:"/"},style:{textDecoration:"none"},onClick:function(t){!function(){ee(!0),0===u.length?_("fullname is blank"):0===f.length?(_(""),P("email is empty")):se()?0===l.length?(_(""),P(""),G("Username is empty")):0===O.length?(_(""),P(""),G(""),K("password is empty")):(_(""),P(""),G(""),K(""),Z("College must be chosen")):(_(""),P("Invalid email format"));return l.length>0&&u.length>0&&f.length>0&&O.length>0&&N.length>0&&se()}()?t.preventDefault():(t.preventDefault(),console.log(e.errorMsg),e.register(e.history,u,f,l,O,N))}},n.a.createElement(I.a,{fullWidth:!0,className:t.button},"Signup"))))})),q=Object(p.a)((function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"center"},width:{width:"30%"},button:{background:"#35578f",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px #33435e",color:"white",marginTop:30,height:"50px",textDecoration:"none",display:"block",textAlign:"center","&:hover":{background:"#33435e"}},textfield:{marginTop:20},header:{marginTop:60}}}));var K=Object(d.b)((function(e){return console.log(e),{isLoading:e.logged.isLoading,isLogged:e.logged.loggedIn,errorMsg:e.error.msg}}),(function(e){return{login:function(t,a,s){F(e,t,a.toLowerCase(),s)},clearErrors:function(){e({type:"CLEAR_ERRORS"})}}}))((function(e){var t=q(),a=Object(s.useState)(""),r=Object(m.a)(a,2),l=r[0],o=r[1],c=Object(s.useState)(""),i=Object(m.a)(c,2),u=i[0],g=i[1],p=Object(s.useState)(!1),h=Object(m.a)(p,2),f=(h[0],h[1]),E=Object(s.useState)(!1),b=Object(m.a)(E,2),v=(b[0],b[1],Object(s.useState)("")),O=Object(m.a)(v,2),S=O[0],y=O[1],j=Object(s.useState)(""),N=Object(m.a)(j,2),x=N[0],k=N[1];function w(t){e.clearErrors(),!function(){f(!0);var e=function(){for(var e=0,t=0,a=0;a<u.length;a++){var s=u.charAt(a);s==s.toUpperCase()&&e++,new RegExp(/^[\d]$/).test(s)&&t++}return t>0&&t<u.length&&e>0&&e<u.length}();0===l.length?y("Username is empty"):0===u.length?(y(""),k("password is empty")):u.length<7?(y(""),k("password needs to be more then eight characters")):e||(y(""),k("password needs at least one digit and one uppercase"));return u.length>=7&&e}()?t.preventDefault():(t.preventDefault(),e.login(e.history,l,u),console.log(e.errorMsg))}return Object(d.c)(),Object(s.useEffect)((function(){e.clearErrors()}),[]),n.a.createElement("div",{className:t.container},n.a.createElement(M.a,{className:t.header,variant:"h4"},"Welcome back!"),n.a.createElement("div",{className:t.width},n.a.createElement("div",{id:"errorlabel"},e.errorMsg),n.a.createElement("div",{className:"spaceForInput"},n.a.createElement(C.a,{placeholder:"Enter Username*",name:"username",type:"text",variant:"outlined",fullWidth:!0,className:t.textfield,onChange:function(e){o(e.target.value)}}),S.length>0&&n.a.createElement("div",{id:"errorlabel"},S)),n.a.createElement("div",{className:"spaceForInput"},n.a.createElement(C.a,{placeholder:"Enter Password*",name:"password",type:"password",variant:"outlined",fullWidth:!0,onChange:function(e){g(e.target.value)},className:t.textfield,onKeyPress:function(e){return"Enter"===e.key?w(e):null}}),x.length>0&&n.a.createElement("div",{id:"errorlabel"},x)),n.a.createElement(A.c,{to:{pathname:"/"},style:{textDecoration:"none"},onClick:w},n.a.createElement(I.a,{fullWidth:!0,className:t.button},"Login"))))})),H=a(30),V=a(6),z=a(325),Z=a(326),X=a(320),$=a(94),ee=a.n($),te=a(334),ae=a(319),se=a(4),ne=a(75),re=a.n(ne),le=a(147),oe=a.n(le),ce=a(332),ie=a(324),ue=a(322),me=a(323),de=a(321),ge=a(36),pe=a(145),he=a.n(pe),fe=a(91),Ee=a.n(fe);function be(e){e.username;var t=e.classes,a=e.getStudents,s=e.deleteClass;return t.map((function(e,t){return n.a.createElement(f.a,{button:!0,id:"listItem",component:A.b,onClick:function(){a(e,e._id)},key:t,className:"listItem"},n.a.createElement(E.a,{primary:e.courseName}),n.a.createElement(E.a,{primary:e.profName}),n.a.createElement(E.a,{primary:e.time}),n.a.createElement(ae.a,null,n.a.createElement(X.a,{onClick:function(){s(e._id)}},n.a.createElement(Ee.a,null)),n.a.createElement(X.a,null,n.a.createElement(re.a,null))))}))}var ve=a(146),Oe=a.n(ve),Ce=a(92),Se=a(93),ye=a.n(Se),je=a(76),Ne=a.n(je);function Ae(e){var t=e.classmates,a=e.currentUsername;return console.log(t,a),n.a.createElement(h.a,null,t.map((function(e,t){return n.a.createElement("div",null,e.username!=a&&n.a.createElement(f.a,null,n.a.createElement(E.a,{primary:e.username}),n.a.createElement(ae.a,null,n.a.createElement(Ce.Link,{to:{pathname:"/chat",state:{username:a,sendMessageTo:e.username}}},n.a.createElement(X.a,null,n.a.createElement(ye.a,null))),n.a.createElement(X.a,null,n.a.createElement(Ne.a,null)))))})))}var Me=function(e){return{avatar:{height:100,width:110},paper:{marginLeft:15,marginTop:40},infocontainer:{display:"flex",justifyContent:"space-between"},classList:{marginTop:8},infoleft:{marginLeft:15,display:"flex",flexDirection:"column",marginTop:-35},extraInfo:{display:"flex",marginBottom:20},extras:{marginLeft:8},image:{height:300,width:"100%",border:"2"},header:{textAlign:"center"}}},xe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).openModal=function(){s.setState({isModalOpened:!0}),console.log(s.state.isModalOpened)},s.closeModal=function(){s.setState({isModalOpened:!1}),console.log(s.state.isModalOpened)},s.updateProfessorname=function(e){s.setState({profName:e.target.value})},s.updateClass=function(e){s.setState({class:e.target.value})},s.updateTime=function(e){s.setState({time:e.target.value})},s.addClass=function(){var e={courseName:s.state.class,profName:s.state.profName,time:s.state.time,username:s.props.userData.username};s.state.classes.push(e),s.setState({classes:s.state.classes}),w.a.post("http://localhost:5000/",{courseName:s.state.class,profName:s.state.profName,time:s.state.time,username:s.props.userData.username,nameOfUser:s.props.userData.fullName}).then().catch((function(e){console.log(e)})),s.setState({isModalOpened:!1})},s.delete=function(e){console.log(e),w.a.delete("http://localhost:5000/".concat(e)).then().catch((function(e){return console.log(e)}))},s.state={isModalOpened:!1,profName:"",class:"",time:"",classes:s.props.classess},s.styles={avatar:{height:100,width:110},paper:{marginLeft:15,marginTop:40},infocontainer:{display:"flex",justifyContent:"space-between"},classList:{marginTop:8},infoleft:{marginLeft:15,display:"flex",flexDirection:"column",marginTop:-35},extraInfo:{display:"flex",marginBottom:20},extras:{marginLeft:8},image:{height:300,width:"100%",border:"2"},header:{textAlign:"center"}},s}return Object(c.a)(a,[{key:"render",value:function(){return console.log(this.props),n.a.createElement(g.a,{container:!0},n.a.createElement(g.a,{container:!0,md:8,direction:"column"},n.a.createElement(b.a,{variant:"outlined",className:this.props.classes.paper},n.a.createElement("img",{src:Oe.a,className:this.props.classes.image}),n.a.createElement("div",{className:this.props.classes.infocontainer},n.a.createElement("div",{className:this.props.classes.infoleft},n.a.createElement(te.a,{src:he.a,id:"avatar",className:this.props.classes.avatar}),n.a.createElement(M.a,{variant:"h6"},this.props.userData.fullName),n.a.createElement(M.a,{variant:"h6"},"Student @ ",this.props.userData.college),n.a.createElement("div",{className:this.props.classes.extraInfo},n.a.createElement(M.a,{variant:"h6"},"Flushing,NY"),n.a.createElement(y.a,{orientation:"vertical",flexItem:!0}),n.a.createElement(M.a,{className:this.props.classes.extras,variant:"h6"},this.props.classess.length," classes"),n.a.createElement(y.a,{orientation:"vertical",flexItem:!0}),n.a.createElement(M.a,{className:this.props.classes.extras,variant:"h6"},this.props.classess.length," queriedClassMates"))),n.a.createElement("div",{className:this.props.classes.inforight},n.a.createElement(re.a,null)))),n.a.createElement(b.a,{className:this.props.classes.paper},n.a.createElement(h.a,{className:this.props.classes.classList},n.a.createElement(f.a,{className:"listItem",id:"topRowOfList"},n.a.createElement(E.a,{primary:"Class Name"}),n.a.createElement(E.a,{primary:"Professor Name"}),n.a.createElement(E.a,{primary:"Time Taken"}),n.a.createElement(ae.a,null,n.a.createElement(X.a,{onClick:this.openModal},n.a.createElement(oe.a,null)),n.a.createElement(ce.a,{open:this.state.isModalOpened,onClose:this.closeModal,"aria-labelledby":"form-dialog-title"},n.a.createElement(de.a,{id:"form-dialog-title"},"Enter a Class"),n.a.createElement(ue.a,null,n.a.createElement(me.a,null,"Enter the class name, professor name, and time below:"),n.a.createElement(C.a,{autoFocus:!0,margin:"dense",id:"classname",label:"Class name:",type:"text",fullWidth:!0,onChange:this.updateClass}),n.a.createElement(C.a,{margin:"dense",id:"professor name",label:"Professor name:",type:"text",fullWidth:!0,onChange:this.updateProfessorname}),n.a.createElement(C.a,{margin:"dense",id:"time",label:"Time",type:"time",fullWidth:!0,onChange:this.updateTime})),n.a.createElement(ie.a,null,n.a.createElement(I.a,{onClick:this.closeModal,color:"primary"},"Cancel"),n.a.createElement(I.a,{onClick:this.addClass,color:"primary"},"Add Class"))))),n.a.createElement(be,{username:this.props.userData.username,classes:this.state.classes,getStudents:this.props.getStudentsForClass,deleteClass:this.delete})))),n.a.createElement(g.a,{md:4},n.a.createElement(b.a,{variant:"outlined",className:this.props.classes.paper},n.a.createElement(M.a,{className:this.props.classes.header,variant:"h6"},"Students for ",this.props.classInfo.courseName),n.a.createElement(Ae,{classmates:this.props.queriedClassMates,currentUsername:this.props.classInfo.username}))))}}]),a}(n.a.Component);var Ie=Object(ge.d)(Object(se.a)(Me),Object(d.b)((function(e){return{userData:e.logged.user,classess:e.classes.currentClasses,queriedClassMates:e.classes.queriedClassMates,classInfo:e.classes.classInfo}}),(function(e){return{getStudentsForClass:function(t,a){console.log(t),function(e,t,a){var s=W();w.a.get("".concat(U,"classes/course/").concat(a),s).then((function(a){console.log(a.data),e({type:"GET_QUERIED_STUDENTS_FROM_DB",payload:a.data}),e({type:"SET_CLASS",payload:t})})).catch((function(e){console.log(e)}))}(e,t,a)}}})))(xe),ke=a(3),we=Object(p.a)((function(e){var t;return{menuButton:(t={marginRight:e.spacing(2)},Object(V.a)(t,e.breakpoints.up("xs"),{display:"none"}),Object(V.a)(t,e.breakpoints.down("xs"),{display:"block"}),t),title:{flexGrow:1,color:"#2daebd",fontWeight:"bolder",textDecoration:"none",fontSize:30,marginLeft:e.spacing(5)},link:{marginLeft:30,textDecoration:"none",fontSize:20,color:"#2daebd",fontWeight:"bolder"},login:{borderLeftWidth:2},navBar:{backgroundColor:"white",boxShadow:"none",position:"sticky",top:0},toolbar:e.mixins.toolbar,bigScreen:Object(V.a)({},e.breakpoints.down("xs"),{display:"none"}),underline:{textDecoration:"underline",textDecorationColor:"#35578f"},menuItems:{marginRight:e.spacing(9)},chat:{}}}));var Te=Object(d.b)((function(e){return console.log(e),{isLogged:e.logged.loggedIn}}),(function(e){return{signOut:function(){!function(e){e({type:"SIGN_OUT"}),e({type:"LOGOUT_SUCCESS"})}(e)}}}))(Object(H.withRouter)((function(e){var t,a,r,l,o,c=we(),i=Object(s.useState)("login"),u=Object(m.a)(i,2),d=u[0],g=u[1];return Object(s.useEffect)((function(){var t=e.history.location.pathname;t=t.substring(1),console.log(""==t),""==t&&g("Feed"),g(t)})),n.a.createElement("div",{id:"navbar",className:c.root},n.a.createElement(z.a,{id:"navbar",className:c.navBar,position:"static"},n.a.createElement(Z.a,{id:"navbar"},n.a.createElement(M.a,{variant:"h6",className:c.title},"Course-Chat"),n.a.createElement("div",{className:c.menuItems},!1===e.isLogged&&n.a.createElement(A.b,{onClick:function(){return g("signup")},className:Object(ke.a)((t={},Object(V.a)(t,c.link,!0),Object(V.a)(t,c.underline,"signup"===d),t)),to:"/signup"},"Sign-Up"),!1===e.isLogged&&n.a.createElement(A.b,{onClick:function(){return g("login")},className:Object(ke.a)((a={},Object(V.a)(a,c.link,!0),Object(V.a)(a,c.underline,"login"===d),a)),to:"/login"},"Login"),e.isLogged&&n.a.createElement(A.b,{onClick:function(){return g("Feed")},className:Object(ke.a)((r={},Object(V.a)(r,c.link,!0),Object(V.a)(r,c.underline,"Feed"===d),r)),to:"/"},"Feed"),e.isLogged&&n.a.createElement(A.b,{onClick:function(){return g("profile")},className:Object(ke.a)((l={},Object(V.a)(l,c.link,!0),Object(V.a)(l,c.underline,"profile"===d),l)),to:"/profile"},"Profile"),e.isLogged&&n.a.createElement(A.b,{onClick:function(){return g("chat")},className:Object(ke.a)((o={},Object(V.a)(o,c.link,!0),Object(V.a)(o,c.underline,"chat"===d),o)),to:"/chat"},"Messages"),e.isLogged&&n.a.createElement(A.b,Object(V.a)({onClick:function(){return g("login")},className:Object(ke.a)(Object(V.a)({},c.link,!0)),to:"/login"},"onClick",(function(){e.history.push("/login"),localStorage.setItem("state",void 0),localStorage.setItem("token",""),e.signOut()})),"LogOut")),n.a.createElement(X.a,{edge:"start",className:c.menuButton,color:"primary",size:"medium","aria-label":"menu"},n.a.createElement(ee.a,{color:"blue"})))))}))),Le=a(148),_e=a.n(Le),Re=(a(201),a(149)),De=a.n(Re),Ue=a(150),Ge=a.n(Ue),Fe=(a(265),a(99)),Be=a.n(Fe),We=function(e){var t=e.message,a=(e.currentChatter,e.username),s=e.lastMessage,r=t.text||t.message,l=t.created_at||"2020-07-01T08:35:13.634Z";l.length>5&&(l=l.substring(11,16));var o=parseInt(l.substring(0,2));o>12&&(l=(o%=12)+l.substring(2));var c=!0;return null!=t.from&&t.from!=a&&(c=!1,t.from.trim().toLowerCase()),c?n.a.createElement("div",{className:"messageContainer justifyEnd"},n.a.createElement("div",{className:"messageBox backgroundBlue"},n.a.createElement("p",{className:"messageText colorWhite"},Be.a.emojify(r))),n.a.createElement("p",{className:"time"},l),s&&t.seen&&n.a.createElement("p",{className:"seen"},"seen")):n.a.createElement("div",{className:"messageContainer justifyStart"},n.a.createElement("div",{className:"messageBox backgroundLight"},n.a.createElement("p",{className:"messageText colorDark"},Be.a.emojify(r))),n.a.createElement("p",{className:"time"},l),s&&t.seen&&n.a.createElement("p",{className:"seen"},"seen"))},Pe=(a(266),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(Ge.a,{className:"messages"},this.props.messages.map((function(t,a){return n.a.createElement("div",{key:a},n.a.createElement(We,{lastMessage:a===e.props.messages.length-1,message:t,currentChatter:e.props.currentChatter,username:e.props.currentUser}))})))}}]),a}(n.a.Component)),Qe=a(151),Je=a.n(Qe),Ye=(a(267),a(152)),qe=a.n(Ye),Ke=(a(268),function(e){var t=e.room,a=e.openModal;return n.a.createElement("div",{className:"infoBar"},n.a.createElement("div",{className:"leftInnerContainer"},n.a.createElement("img",{className:"onlineIcon",src:Je.a,alt:"online icon"}),n.a.createElement("h3",null,t)),n.a.createElement("div",{className:"rightInnerContainer"},n.a.createElement(I.a,{onClick:function(){return a()}},n.a.createElement(qe.a,null))))}),He=(a(269),function(e){var t=e.setMessage,a=e.sendMessage,s=e.message,r=e.currentChatter;return n.a.createElement("form",{className:"form"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Type a message...",value:s,onChange:function(e){var a=e.target.value;return t(a)},onKeyPress:function(e){return"Enter"===e.key?a(e):null}}),n.a.createElement("button",{disabled:""==r,className:""!==r?"sendButton":"redSendButton",onClick:function(e){return a(e)}},"Send"))}),Ve=a(328),ze=(a(270),a(77)),Ze=a(327),Xe=a(333),$e=a(330),et=Object(p.a)((function(e){return{root:{padding:"10px 0px 10px 0px",display:"flex",alignItems:"center",width:"100%",borderTopColor:"gray"},input:{marginLeft:e.spacing(4),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}));function tt(e){var t=et(),a=e.handleChangeSearchText;return n.a.createElement($e.a,{className:t.root,borderColor:"grey.500",borderTop:1,borderBottom:1},n.a.createElement(M.a,{variant:"h6"},"To:"),n.a.createElement(Xe.a,{className:t.input,placeholder:"Search classmates",onChange:function(e){return a(e.target.value)},fullWidth:!0}))}var at=a(153),st=a.n(at),nt=Object(p.a)({avatar:{backgroundColor:ze.a[100],color:ze.a[600]},grow:{justifyContent:"flex-end",flex:1},listItem:{color:ze.a[700],borderBottom:0},nameUnderUsername:{flexGrow:1,flexShrink:1,flexBasis:"auto",width:"100%"},username:{fontWeight:"bold",color:Ze.a[900]},name:{color:"gray"},courseName:{color:ze.a[800]},titleAndCloseIcon:{display:"flex"}});function rt(e){var t=nt(),a=e.addChatter,r=e.closeModal,l=e.modalOpened,o=e.classMates,c=Object(s.useState)(o),i=Object(m.a)(c,2),u=i[0],d=i[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(ce.a,{id:"dialog",open:l,onClose:r,fullWidth:!0},n.a.createElement("div",{className:t.titleAndCloseIcon},n.a.createElement(de.a,{className:t.grow,id:"simple-dialog-title"},"New Message"),n.a.createElement(I.a,{onClick:function(){return r()}},n.a.createElement(st.a,null))),n.a.createElement(tt,{handleChangeSearchText:function(e){var t=o.filter((function(t){return-1!=t.username.toLowerCase().indexOf(e.toLowerCase())}));d(t)}}),n.a.createElement(h.a,null,u.map((function(e,s){return n.a.createElement(f.a,Object(V.a)({className:t.listItem,button:!0,id:"listItem",onClick:function(){return function(e){a(e.username),r()}(e)},key:s},"className","listItem"),n.a.createElement(Ve.a,null,n.a.createElement(te.a,{className:t.avatar},n.a.createElement(Ne.a,null))),n.a.createElement("div",{className:t.nameUnderUsername},n.a.createElement(E.a,{className:t.username,primary:e.username}),n.a.createElement(E.a,{className:t.name,primary:e.nameOfUser})),n.a.createElement(E.a,{primary:e.courseName,className:t.courseName}))})))))}a(271),a(272);var lt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.chatters,s=t.currentChatter,r=t.notification;return n.a.createElement("div",{className:"chattersList"},a.map((function(t){return n.a.createElement(f.a,{id:s==t?"currentChatter":"chatter",button:!0,onClick:function(){return e.props.changeChatter(t)}},n.a.createElement("p",null,t),n.a.createElement("br",null),r.user===t?n.a.createElement("p",null,r.message):null)})))}}]),a}(n.a.Component),ot={chatters:[],messages:[],socketId:""},ct=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).filterMessages=function(e,t){for(var a=[],n=0,r=0;r<e.length;r++)e[r].from!=t&&e[r].to!==t||(a[n++]=e[r]);console.log(a),s.setState({messagesToShow:a})},s.sendMessage=function(e){if(e.preventDefault(),""!=s.state.message){s.state.socket.emit("sendPrivateMessage",s.state.message,s.state.username,s.state.currentChatter,(function(){return s.setMessage("")}));var t=new Date,a=t.getMinutes();a/10<1&&(a="0"+a);var n=t.getHours()%12+":"+a,r={message:s.state.message,from:s.state.username,to:s.state.currentChatter,created_at:n};s.setState({messagesToShow:[].concat(Object(R.a)(s.state.messagesToShow),[r])}),s.props.addMessage(r),s.setState({allMessages:[].concat(Object(R.a)(s.state.allMessages),[r])}),s.setMessage("")}},s.setMessage=function(e){s.setState({message:e})},s.addChatter=function(e){var t=s.state.chatters.indexOf(e);console.log(t),-1==t&&s.setState({chatters:[].concat(Object(R.a)(s.state.chatters),[e])}),s.changeChatter(e)},s.changeChatter=function(e){s.state.notification.user===e&&s.setState({notification:{}}),s.setState({currentChatter:e}),s.filterMessages(s.state.allMessages,e);for(var t=s.state.allMessages.length-1;t>=0&&s.state.allMessages[t].to!==e;t--)if(s.state.allMessages[t].from===e){console.log(s.state.allMessages[t]),s.state.socket.emit("message_seen",e,s.props.user.username);break}},s.openModal=function(){s.setState({modalOpened:!0})},s.closeModal=function(){s.setState({modalOpened:!1})},s.state={username:s.props.user.username,currentChatter:"",chatters:[],allMessages:[],messagesToShow:[],socket:De()("https://still-falls-89885.herokuapp.com/"),message:"",modalOpened:!1,notification:{}},s}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;console.log("mounted again");var t={},a=W();if(0!==this.props.allMessages.length&&0!=this.props.allChatters.length?(this.setState({allMessages:this.props.allMessages}),this.setState({chatters:this.props.allChatters})):(w.a.get("".concat(U,"messages/").concat(this.state.username,"/chatters"),a).then((function(a){console.log(a.data);var s=a.data.filter((function(t){return t!=e.state.username}));t.chatters=s,e.setState({chatters:s})})),w.a.get("".concat(U,"messages/").concat(this.state.username),a).then((function(a){t.messages=a.data,e.setState({allMessages:t.messages}),e.props.setMessagesAndChatters(t)})).then((function(){if(console.log("yay"),null!=e.props.location.state){console.log("only when u come from class component");var t=e.props.location.state.sendMessageTo;e.setState({currentChatter:t}),e.props.allChatters.includes(t)||e.setState({chatters:[].concat(Object(R.a)(e.state.chatters),[t])}),e.filterMessages(e.props.allMessages,t)}}))),null!=this.props.location.state){console.log("only when u come from class component");var s=this.props.location.state.sendMessageTo;this.setState({currentChatter:s}),this.props.allChatters.includes(s)||this.setState({chatters:[].concat(Object(R.a)(this.state.chatters),[s])}),this.filterMessages(this.props.allMessages,s)}this.setState({chatters:this.props.allChatters}),this.filterMessages(this.props.allMessages,this.state.currentChatter),this.state.socket.emit("user_connected",this.state.username),this.state.socket.on("private_message",(function(t,a){console.log("message received!"),a!==e.state.currentChatter?e.setState({notification:{message:t,user:a}}):e.setState({notification:{}}),-1===e.state.chatters.indexOf(a)&&e.setState({chatters:[].concat(Object(R.a)(e.state.chatters),[a])}),e.state.currentChatter===a&&e.state.socket.emit("message_seen",a,e.props.user.username);t={from:a,to:e.state.username,message:t};e.props.addMessage(t),e.setState({allMessages:[].concat(Object(R.a)(e.state.allMessages),[t])}),e.filterMessages(e.state.allMessages,e.state.currentChatter)})),this.state.socket.on("message_seen",(function(t){console.log(t+"just seen your message!");for(var a=e.state.allMessages.length-1;a>=0;a--)if(e.state.allMessages[a].to===t){e.setState({allMessages:[].concat(Object(R.a)(e.state.allMessages.slice(0,a)),[Object.assign({},e.state.allMessages[a],{seen:!0})],Object(R.a)(e.state.allMessages.slice(a+1)))}),console.log(e.state.allMessages[a]),e.filterMessages(e.state.allMessages,e.state.currentChatter),console.log(e.state.messagesToShow);break}}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return n.a.createElement("div",{className:"outerContainer"},n.a.createElement(lt,{notification:this.state.notification,username:this.state.username,chatters:this.state.chatters,changeChatter:this.changeChatter,currentChatter:this.state.currentChatter}),n.a.createElement("div",{className:"container"},n.a.createElement(Ke,{openModal:this.openModal,room:this.state.currentChatter}),n.a.createElement(Pe,{messages:this.state.messagesToShow,currentChatter:this.state.currentChatter,currentUser:this.state.username}),n.a.createElement(He,{message:this.state.message,setMessage:this.setMessage,sendMessage:this.sendMessage,currentChatter:this.state.currentChatter}),this.state.modalOpened&&n.a.createElement(rt,{addChatter:this.addChatter,changeChatter:this.changeChatter,modalOpened:this.state.modalOpened,classMates:this.props.classMates,closeModal:this.closeModal})))}}]),a}(n.a.Component);ct.defaultProps={connectedClients:[],classMates:[],username:{username:"akhil"}};var it=Object(d.b)((function(e){return{allMessages:e.chatters.messages,allChatters:e.chatters.chatters,classMates:e.classes.classMates,user:e.logged.user}}),(function(e){return{setMessagesAndChatters:function(t){e({type:"set_messages_and_chatters_from_db",payload:t})},addMessage:function(t){e({type:"ADD_MESSAGE",payload:t})},addChatter:function(t){e({type:"ADD_CHATTER",payload:t})}}}))(ct),ut=a(154),mt={msg:"",status:null,id:null},dt={currentClasses:[],queriedClassMates:[],classInfo:{},classMates:[]},gt=[ut.a],pt=Object(ge.c)({logged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return{loggedIn:!0};case"SIGN_OUT":return{loggedIn:!1};case"ADD_CLASS":return{classes:[].concat(Object(R.a)(e.classes),[t.payload])};case"USER_LOADING":return Object(P.a)({},e,{isLoading:!0});case"USER_LOADED":return Object(P.a)({},e,{loggedIn:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(P.a)({},e,{},t.payload,{loggedIn:!0,isLoading:!1,user:t.payload});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(P.a)({},e,{token:null,user:null,loggedIn:!1,isLoading:!1});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return console.log(t.payload),Object(P.a)({},e,{msg:t.payload.msg,status:t.payload.status,id:t.payload.id});case"CLEAR_ERRORS":return Object(P.a)({},e,{msg:"",status:null,id:null});default:return e}},chatters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_messages_and_chatters_from_db":return{chatters:t.payload.chatters,messages:t.payload.messages};case"ADD_MESSAGE":return Object(P.a)({},e,{messages:[].concat(Object(R.a)(e.messages),[t.payload])});case"ADD_CHATTER":return Object(P.a)({},e,{chatters:[].concat(Object(R.a)(e.chatters),[t.payload])});default:return e}},classes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CLASS":return Object(P.a)({},e,{currentClasses:[].concat(Object(R.a)(e.currentClasses),[t.payload])});case"SET_STUDENTS":return console.log(t.payload),Object(P.a)({},e,{classMates:t.payload});case"GET_CLASSES_FROM_DB":return Object(P.a)({},e,{currentClasses:t.payload});case"GET_QUERIED_STUDENTS_FROM_DB":return Object(P.a)({},e,{queriedClassMates:t.payload});case"SET_CLASS":return Object(P.a)({},e,{classInfo:t.payload});default:return e}}});var ht=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return void console.log(t)}}(),ft=Object(ge.e)((function(e,t){return"SIGN_OUT"===t.type&&(e=void 0),pt(e,t)}),ht,ge.a.apply(void 0,gt));ft.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){console.log(a)}}(ft.getState())}));var Et=ft,bt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("yo"),console.log(U)}},{key:"render",value:function(){return n.a.createElement(A.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(Te,null),n.a.createElement(H.Route,{path:"/",exact:!0,component:N}),n.a.createElement(H.Route,{path:"/signup",component:Y}),n.a.createElement(H.Route,{path:"/login",component:K}),n.a.createElement(H.Route,{path:"/profile",component:Ie}),n.a.createElement(H.Route,{path:"/class",component:_e.a}),n.a.createElement(H.Route,{path:"/chat",component:it})))}}]),a}(n.a.Component);var vt=Object(d.b)(null,(function(e){return{loadUser:function(){B(e)}}}))(bt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(d.a,{store:Et},n.a.createElement(vt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[168,1,2]]]);
//# sourceMappingURL=main.0caed6cf.chunk.js.map